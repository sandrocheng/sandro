package com.keniu.security.malware;

import android.app.Activity;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.content.pm.ApplicationInfo;
import android.content.pm.PackageManager;
import android.content.pm.PackageManager.NameNotFoundException;
import android.os.Bundle;
import android.os.Handler;
import android.os.Message;
import android.text.TextUtils;
import android.util.Log;
import android.widget.Button;
import android.widget.ExpandableListView;
import android.widget.LinearLayout;
import android.widget.ProgressBar;
import android.widget.RelativeLayout;
import android.widget.TextView;
import com.keniu.security.a.f;
import com.keniu.security.monitor.b;
import java.io.File;
import java.util.ArrayList;
import java.util.List;

public class NotificationAdsCheckActivity extends Activity
  implements b
{
  private static final String s = "ap.jar";
  ExpandableListView a;
  public PackageManager b = null;
  RelativeLayout c;
  TextView d;
  TextView e;
  ProgressBar f;
  int g = 0;
  int h = 0;
  long i;
  long j;
  boolean k = false;
  Button l;
  Button m;
  LinearLayout n;
  com.keniu.security.monitor.a o;
  f p = new f();
  Handler q = new ap(this);
  private String r;
  private List t = new ArrayList();
  private aw u;
  private BroadcastReceiver v = new ar(this);

  private void a()
  {
    IntentFilter localIntentFilter = new IntentFilter();
    localIntentFilter.addAction("com.ijinshan.dumpsysstart.broadcast");
    localIntentFilter.addAction("com.ijinshan.dumpsysover.broadcast");
    localIntentFilter.setPriority(2147483647);
    registerReceiver(this.v, localIntentFilter);
  }

  private av b(String paramString)
  {
    av localav = new av(this);
    int i1 = paramString.indexOf("pkg=");
    if (i1 < 0)
      localav = null;
    while (true)
    {
      return localav;
      int i2 = i1 + 4;
      int i3 = paramString.indexOf(" id");
      if (i3 < 0)
      {
        localav = null;
      }
      else if (paramString.substring(i2, i3) == null)
      {
        localav = null;
      }
      else
      {
        localav.a = paramString.substring(i2, i3);
        try
        {
          if (getPackageManager().getApplicationInfo(localav.a, 128).uid < 10000)
          {
            localav = null;
            continue;
          }
          if (TextUtils.isEmpty(localav.a))
          {
            localav = null;
            continue;
          }
          if ((!localav.a.equals("com.ijinshan.mguard")) && (!localav.a.equals("com.ijinshan.kbatterydoctor")))
          {
            boolean bool = localav.a.equals("com.ijinshan.duba");
            if (!bool);
          }
          else
          {
            localav = null;
          }
        }
        catch (PackageManager.NameNotFoundException localNameNotFoundException)
        {
          localNameNotFoundException.printStackTrace();
          int i4 = paramString.indexOf("contentIntent=") + "contentIntent=".length();
          if (paramString.substring(i4, i4 + 4).equals("null"))
          {
            localav = null;
            continue;
          }
          int i5 = paramString.indexOf("tickerText=");
          if (i5 < 0)
          {
            localav = null;
            continue;
          }
          String str = paramString.substring(i5 + "tickerText=".length());
          int i6 = str.indexOf("contentView=");
          if (i6 < 0)
          {
            localav = null;
            continue;
          }
          localav.c = str.substring(0, i6);
          if (TextUtils.isEmpty(localav.c))
            localav = null;
        }
        if (localav.c.equals("null"))
          localav = null;
      }
    }
  }

  private void b()
  {
    this.n = ((LinearLayout)findViewById(2131231183));
    this.e = ((TextView)findViewById(2131230927));
    this.d = ((TextView)findViewById(2131230930));
    this.f = ((ProgressBar)findViewById(2131230929));
    this.c = ((RelativeLayout)findViewById(2131231184));
    bz.a();
    if (!bz.b())
    {
      this.n.setVisibility(0);
      this.d.setVisibility(8);
      this.e.setVisibility(8);
      this.f.setVisibility(8);
      this.c.setVisibility(8);
      this.n.setOnClickListener(new as(this));
    }
    while (true)
    {
      this.i = System.currentTimeMillis();
      com.jxphone.mosecurity.a.a.i(getApplicationContext(), "mg_ad_check_main");
      new com.keniu.security.a.a(this);
      this.a = ((ExpandableListView)findViewById(2131231189));
      this.l = ((Button)findViewById(2131230926));
      this.m = ((Button)findViewById(2131231188));
      this.l.setOnClickListener(new ba(this));
      this.m.setOnClickListener(new ba(this));
      ((TextView)findViewById(2131230727)).setText(getString(2131428573));
      this.a.setOnGroupExpandListener(new at(this));
      return;
      Log.i("other", "0");
      this.b = getPackageManager();
      this.u = new aw(this, getApplicationContext());
      if (!bz.a().e())
      {
        bz.a().c();
        this.o = com.keniu.security.monitor.a.a();
        this.o.a(com.keniu.security.monitor.a.x, this, 1073741823);
      }
      else
      {
        new bb(getApplicationContext()).start();
      }
    }
  }

  private void c()
  {
    Log.i("other", "0");
    this.b = getPackageManager();
    this.u = new aw(this, getApplicationContext());
    if (!bz.a().e())
    {
      bz.a().c();
      this.o = com.keniu.security.monitor.a.a();
      this.o.a(com.keniu.security.monitor.a.x, this, 1073741823);
    }
    while (true)
    {
      return;
      new bb(getApplicationContext()).start();
    }
  }

  private void c(String paramString)
  {
    if (paramString.length() < 20);
    while (true)
    {
      return;
      int i1 = paramString.indexOf("Notification List");
      if (i1 >= 0)
      {
        String[] arrayOfString = paramString.substring(i1).split("NotificationRecord");
        if (arrayOfString.length > 0)
        {
          int i2 = 0;
          while (true)
            if (i2 < arrayOfString.length)
            {
              String str = arrayOfString[i2];
              av localav;
              if (str.length() > 0)
              {
                localav = b(str);
                if (localav == null);
              }
              try
              {
                localav.d = localav.h.b.getApplicationInfo(localav.a, 128);
                localav.e = localav.h.b.getApplicationIcon(localav.d);
                localav.f = ((String)localav.d.loadLabel(localav.h.b));
                localav.g = localav.h.a(localav.a);
                localav.b = new File(localav.d.sourceDir).length();
                this.g = (1 + this.g);
                if (localav.g)
                {
                  this.h = (1 + this.h);
                  i3 = 0;
                  int i4 = -1;
                  if (i3 < this.t.size())
                  {
                    i4 = ((av)this.t.get(i3)).f.trim().indexOf(localav.f.trim());
                    if (i4 != -1)
                      i4 = i3;
                  }
                  else
                  {
                    if (i4 <= 0)
                      break label315;
                    this.t.add(i4, localav);
                    i2++;
                  }
                }
              }
              catch (PackageManager.NameNotFoundException localNameNotFoundException)
              {
                while (true)
                {
                  int i3;
                  localNameNotFoundException.printStackTrace();
                  continue;
                  i3++;
                  continue;
                  label315: this.t.add(0, localav);
                  continue;
                  this.t.add(localav);
                  com.jxphone.mosecurity.a.a.a(getApplicationContext(), localav.a, localav.b, localav.c);
                }
              }
            }
          this.t.add(0, null);
          this.t.add(1 + this.h, null);
        }
        runOnUiThread(new au(this));
      }
    }
  }

  private void d()
  {
    this.a.setOnGroupExpandListener(new at(this));
  }

  private void e()
  {
    new bb(getApplicationContext()).start();
  }

  public final int a(int paramInt, Object paramObject1, Object paramObject2)
  {
    if (paramInt == com.keniu.security.monitor.a.x)
    {
      this.k = ((Boolean)paramObject1).booleanValue();
      if (this.k)
        break label48;
      Message localMessage = Message.obtain();
      localMessage.what = 3;
      this.q.sendMessage(localMessage);
    }
    while (true)
    {
      return 0;
      label48: new bb(getApplicationContext()).start();
    }
  }

  public final boolean a(String paramString)
  {
    try
    {
      ApplicationInfo localApplicationInfo = getApplicationContext().getPackageManager().getApplicationInfo(paramString, 0);
      boolean bool2 = this.p.a(localApplicationInfo);
      bool1 = bool2;
      return bool1;
    }
    catch (PackageManager.NameNotFoundException localNameNotFoundException)
    {
      while (true)
      {
        localNameNotFoundException.printStackTrace();
        boolean bool1 = false;
      }
    }
  }

  protected void onActivityResult(int paramInt1, int paramInt2, Intent paramIntent)
  {
    if ((paramInt1 == 1) && (paramInt2 == 0));
    for (int i1 = 0; ; i1++)
      if (i1 < this.t.size())
      {
        try
        {
          if (this.t.get(i1) == null)
            continue;
          getPackageManager().getPackageInfo(((av)this.t.get(i1)).a, 256);
        }
        catch (PackageManager.NameNotFoundException localNameNotFoundException)
        {
          this.t.remove(i1);
          if (i1 < 1 + this.h)
            this.h -= 1;
          this.g -= 1;
          this.u.notifyDataSetChanged();
        }
      }
      else
      {
        for (int i2 = 0; i2 < this.t.size(); i2++)
          this.a.collapseGroup(i2);
        return;
      }
  }

  protected void onCreate(Bundle paramBundle)
  {
    super.onCreate(paramBundle);
    requestWindowFeature(1);
    setContentView(2130903148);
    IntentFilter localIntentFilter = new IntentFilter();
    localIntentFilter.addAction("com.ijinshan.dumpsysstart.broadcast");
    localIntentFilter.addAction("com.ijinshan.dumpsysover.broadcast");
    localIntentFilter.setPriority(2147483647);
    registerReceiver(this.v, localIntentFilter);
    this.n = ((LinearLayout)findViewById(2131231183));
    this.e = ((TextView)findViewById(2131230927));
    this.d = ((TextView)findViewById(2131230930));
    this.f = ((ProgressBar)findViewById(2131230929));
    this.c = ((RelativeLayout)findViewById(2131231184));
    bz.a();
    if (!bz.b())
    {
      this.n.setVisibility(0);
      this.d.setVisibility(8);
      this.e.setVisibility(8);
      this.f.setVisibility(8);
      this.c.setVisibility(8);
      this.n.setOnClickListener(new as(this));
    }
    while (true)
    {
      this.i = System.currentTimeMillis();
      com.jxphone.mosecurity.a.a.i(getApplicationContext(), "mg_ad_check_main");
      new com.keniu.security.a.a(this);
      this.a = ((ExpandableListView)findViewById(2131231189));
      this.l = ((Button)findViewById(2131230926));
      this.m = ((Button)findViewById(2131231188));
      this.l.setOnClickListener(new ba(this));
      this.m.setOnClickListener(new ba(this));
      ((TextView)findViewById(2131230727)).setText(getString(2131428573));
      this.a.setOnGroupExpandListener(new at(this));
      return;
      Log.i("other", "0");
      this.b = getPackageManager();
      this.u = new aw(this, getApplicationContext());
      if (!bz.a().e())
      {
        bz.a().c();
        this.o = com.keniu.security.monitor.a.a();
        this.o.a(com.keniu.security.monitor.a.x, this, 1073741823);
      }
      else
      {
        new bb(getApplicationContext()).start();
      }
    }
  }

  protected void onDestroy()
  {
    super.onDestroy();
    if (this.o != null)
      this.o.a(com.keniu.security.monitor.a.x, this);
    Log.i("other", "over");
    unregisterReceiver(this.v);
  }
}

/* Location:           C:\Users\sandrocheng.21KUNPENG\Desktop\classes_dex2jar\
 * Qualified Name:     com.keniu.security.malware.NotificationAdsCheckActivity
 * JD-Core Version:    0.6.2
 */